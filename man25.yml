modules:
  confluence:globalPage:
    - key: solace-ep-token
      resource: ep-token
      resolver:
        function: ep-token
      title: Solace Event Portal API Token
      route: solace-ep-token
  macro:
    - key: solace-ep-macro
      function: ep-macro
      title: Solace Event Portal Macro
      description: Inserts Hello world!
      config:
        function: ep-macro-config
  function:
    - key: ep-token
      handler: index.handler
    - key: ep-macro
      handler: index.run
    - key: ep-macro-config
      handler: index.config
resources:
  - key: ep-token
    path: static/ep-token/build
    tunnel:
      port: 3000
  - key: ep-macro
    path: static/ep-macro/build
    tunnel:
      port: 3001
permissions:
  scopes:
    - read:confluence-user
    - read:user.property:confluence
    - write:user.property:confluence
  content:
    styles:
      - 'unsafe-inline'
    scripts:
      - 'unsafe-eval'
  external:
    fetch:
      client:
        - "*.localhost"
        - "*"
      backend:
        - "*.localhost"
        - "*"